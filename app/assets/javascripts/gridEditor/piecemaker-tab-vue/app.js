webpackJsonp([1],{149:function(t,e,n){function s(t){n(201)}var r=n(7)(n(158),n(226),s,null,null);t.exports=r.exports},150:function(t,e,n){function s(t){n(196)}var r=n(7)(n(159),n(221),s,"data-v-33bd29c9",null);t.exports=r.exports},152:function(t,e,n){"use strict";var s=n(165),r=n.n(s),i=n(166),o=n.n(i),u=n(163),a=n.n(u),c=n(204),l=n.n(c),p=n(4),v=n(0),d=n.n(v),f={state:{user:{},groups:[]},mutations:{user:function(t,e){t.user=e},groups:function(t,e){t.groups=e},group:function(t,e){var n=t.groups.find(function(t){return t.id===e.id});if(n){var s=t.groups.indexOf(n);e.videos=e.videos||[],e.events=e.events||[],p.a.set(t.groups,s,e)}},videos:function(t,e){var n=e.groupId,s=e.videos,r=t.groups.find(function(t){return t.id===n});r&&p.a.set(r,"videos",s)},event:function(t,e){var n=e.groupId,s=e.event,r=t.groups.find(function(t){return t.id===n});if(r)if(r.events){var i=r.events.find(function(t){return t.id===s.id});if(i){var o=r.events.indexOf(i);p.a.set(r.events,o,s)}else r.events.push(s),r.events.sort(function(t,e){return t.utc_timestamp.getTime()-e.utc_timestamp.getTime()})}else r.events=[s]},events:function(t,e){var n=e.groupId,s=e.events,r=t.groups.find(function(t){return t.id===n});if(r){var i=t.groups.indexOf(r);p.a.set(t.groups,i,a()({},r,{events:s}))}}}},m=function(){function t(e){r()(this,t),this.pm2=e,this.pm2.error=function(t){throw console.log("Catching errs in PM2 plugin …"),new Error(t)}}return o()(t,[{key:"getPlugin",value:function(){var t=this;return function(e){t.store=e,e.subscribe(function(t,e){var n=t.type;t.payload;console.log("[pm2Service]",n)}),e.registerModule("piecemaker",f)}}},{key:"login",value:function(t,e){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.pm2.login(t,e,function(r){n.store.commit("user",{email:t,password:e,api_key:r},{module:"piecemaker"}),s(r)})}},{key:"getGroups",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.pm2.listGroups(function(n){t.store.commit("groups",n,{module:"piecemaker"}),e(n)})}},{key:"getGroup",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.store.state.piecemaker.groups.length>0?this.pm2.getGroup(t,function(t){e.store.commit("group",t,{module:"piecemaker"}),n(t)}):this.getGroups(function(){e.getGroup(t,n)})}},{key:"getVideos",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.pm2.listEventsOfType(t,"video",function(s){e.store.commit("videos",{groupId:t,videos:s},{module:"piecemaker"}),n(s)})}},{key:"getEvent",value:function(t,e){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.pm2.getEvent(t,e,function(e){n.store.commit("event",{groupId:t,event:e},{module:"piecemaker"}),s(e)})}},{key:"getEventsForEvent",value:function(t,e){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=e.utc_timestamp.getTime(),i=r+1e3*e.duration;this.pm2.listEventsForTimespan(t,r,i,"intersect",function(e){n.store.commit("events",{groupId:t,events:e},{module:"piecemaker"}),s(e)})}}]),t}();e.a={install:function(t,e){t.pm2Service=new m(new l.a(e)),t.filter("contextTime",function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){return t.getTime()-e.utc_timestamp.getTime()}return d()(t).format("YYYY-MM-DD HH:mm")})}}},153:function(t,e,n){"use strict";var s=n(4),r=n(227),i=n(220),o=n.n(i),u=n(218),a=n.n(u),c=n(149),l=n.n(c);s.a.use(r.a),e.a=new r.a({routes:[{path:"/",component:o.a},{path:"/group/:groupId",component:a.a,children:[{path:"context/:contextId",component:l.a}]}]})},154:function(t,e,n){function s(t){n(198)}var r=n(7)(n(157),n(223),s,null,null);t.exports=r.exports},156:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),r=n(154),i=n.n(r),o=n(153),u=n(152),a=n(155);s.a.use(a.a),s.a.config.productionTip=!1,s.a.use(u.a,{host:"https://piecemaker2-api-public.herokuapp.com",api_key:"0310XPC6JEeF0oCy"});var c=new a.a.Store({store:{},plugins:[s.a.pm2Service.getPlugin()]});new s.a({el:"#app",store:c,router:o.a,template:"<App/>",components:{App:i.a}})},157:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},158:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),r=n(150),i=n.n(r);e.default={props:["group","context"],data:function(){return{}},computed:{events:function(){var t=this;return this.group.events.filter(function(e){return e.id!==t.context.id})}},mounted:function(){if(this.group.id!==this.context.event_group_id)throw new Error("Piecemaker2-Context component: context needs to belong to group");s.a.pm2Service.getEventsForEvent(this.group.id,this.context)},components:{"pm2-event-listing":i.a}}},159:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["event","context"],data:function(){return{}},computed:{title:function(){return this.event.fields.title||"Untitled event"},tags:function(){var t=this.event.fields.tags;return t&&t.length>0?this.event.fields.tags.split(","):[]}}}},160:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),r=n(149),i=n.n(r),o=n(150),u=n.n(o);e.default={data:function(){return{groupId:-1}},computed:{groupPath:function(){return"/group/"+this.group.id},contextPath:function(){return this.groupPath+"/context/"+this.context.id},contextId:function(){return parseInt(this.$route.params.contextId)||void 0},context:function(){var t=this;if(this.videos)return this.videos.find(function(e){return e.id===t.contextId})},group:function(){var t=this,e=this.$store.state.piecemaker.groups.find(function(e){return e.id===t.groupId});return e&&!e.videos&&s.a.pm2Service.getVideos(this.groupId),e},videos:function(){return this.group.videos}},watch:{groupId:function(){this.group?this.group.videos||s.a.pm2Service.getVideos(this.groupId):s.a.pm2Service.getGroup(this.groupId)}},mounted:function(){this.groupId=parseInt(this.$route.params.groupId,10)},components:{"pm2-context":i.a,"pm2-event-listing":u.a}}},161:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["group"]}},162:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),r=n(219),i=n.n(r);e.default={data:function(){return{textFilter:"",sortReversed:!0}},computed:{groups:function(){return this.$store.state.piecemaker.groups},groupsSortedAndFiltered:function(){var t=this.groups.slice(0);if(this.textFilter){var e=this.textFilter.toLowerCase();t=t.filter(function(t){return t.title.toLowerCase().indexOf(e)>=0||t.description.toLowerCase().indexOf(e)>=0})}return t.sort(function(t,e){return t.title.localeCompare(e.title)}),this.sortReversed&&t.reverse(),t}},mounted:function(){s.a.pm2Service.getGroups()},components:{"pm2-group-listing":i.a}}},196:function(t,e){},197:function(t,e){},198:function(t,e){},199:function(t,e){},200:function(t,e){},201:function(t,e){},203:function(t,e,n){function s(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./af":24,"./af.js":24,"./ar":31,"./ar-dz":25,"./ar-dz.js":25,"./ar-kw":26,"./ar-kw.js":26,"./ar-ly":27,"./ar-ly.js":27,"./ar-ma":28,"./ar-ma.js":28,"./ar-sa":29,"./ar-sa.js":29,"./ar-tn":30,"./ar-tn.js":30,"./ar.js":31,"./az":32,"./az.js":32,"./be":33,"./be.js":33,"./bg":34,"./bg.js":34,"./bn":35,"./bn.js":35,"./bo":36,"./bo.js":36,"./br":37,"./br.js":37,"./bs":38,"./bs.js":38,"./ca":39,"./ca.js":39,"./cs":40,"./cs.js":40,"./cv":41,"./cv.js":41,"./cy":42,"./cy.js":42,"./da":43,"./da.js":43,"./de":46,"./de-at":44,"./de-at.js":44,"./de-ch":45,"./de-ch.js":45,"./de.js":46,"./dv":47,"./dv.js":47,"./el":48,"./el.js":48,"./en-au":49,"./en-au.js":49,"./en-ca":50,"./en-ca.js":50,"./en-gb":51,"./en-gb.js":51,"./en-ie":52,"./en-ie.js":52,"./en-nz":53,"./en-nz.js":53,"./eo":54,"./eo.js":54,"./es":56,"./es-do":55,"./es-do.js":55,"./es.js":56,"./et":57,"./et.js":57,"./eu":58,"./eu.js":58,"./fa":59,"./fa.js":59,"./fi":60,"./fi.js":60,"./fo":61,"./fo.js":61,"./fr":64,"./fr-ca":62,"./fr-ca.js":62,"./fr-ch":63,"./fr-ch.js":63,"./fr.js":64,"./fy":65,"./fy.js":65,"./gd":66,"./gd.js":66,"./gl":67,"./gl.js":67,"./gom-latn":68,"./gom-latn.js":68,"./he":69,"./he.js":69,"./hi":70,"./hi.js":70,"./hr":71,"./hr.js":71,"./hu":72,"./hu.js":72,"./hy-am":73,"./hy-am.js":73,"./id":74,"./id.js":74,"./is":75,"./is.js":75,"./it":76,"./it.js":76,"./ja":77,"./ja.js":77,"./jv":78,"./jv.js":78,"./ka":79,"./ka.js":79,"./kk":80,"./kk.js":80,"./km":81,"./km.js":81,"./kn":82,"./kn.js":82,"./ko":83,"./ko.js":83,"./ky":84,"./ky.js":84,"./lb":85,"./lb.js":85,"./lo":86,"./lo.js":86,"./lt":87,"./lt.js":87,"./lv":88,"./lv.js":88,"./me":89,"./me.js":89,"./mi":90,"./mi.js":90,"./mk":91,"./mk.js":91,"./ml":92,"./ml.js":92,"./mr":93,"./mr.js":93,"./ms":95,"./ms-my":94,"./ms-my.js":94,"./ms.js":95,"./my":96,"./my.js":96,"./nb":97,"./nb.js":97,"./ne":98,"./ne.js":98,"./nl":100,"./nl-be":99,"./nl-be.js":99,"./nl.js":100,"./nn":101,"./nn.js":101,"./pa-in":102,"./pa-in.js":102,"./pl":103,"./pl.js":103,"./pt":105,"./pt-br":104,"./pt-br.js":104,"./pt.js":105,"./ro":106,"./ro.js":106,"./ru":107,"./ru.js":107,"./sd":108,"./sd.js":108,"./se":109,"./se.js":109,"./si":110,"./si.js":110,"./sk":111,"./sk.js":111,"./sl":112,"./sl.js":112,"./sq":113,"./sq.js":113,"./sr":115,"./sr-cyrl":114,"./sr-cyrl.js":114,"./sr.js":115,"./ss":116,"./ss.js":116,"./sv":117,"./sv.js":117,"./sw":118,"./sw.js":118,"./ta":119,"./ta.js":119,"./te":120,"./te.js":120,"./tet":121,"./tet.js":121,"./th":122,"./th.js":122,"./tl-ph":123,"./tl-ph.js":123,"./tlh":124,"./tlh.js":124,"./tr":125,"./tr.js":125,"./tzl":126,"./tzl.js":126,"./tzm":128,"./tzm-latn":127,"./tzm-latn.js":127,"./tzm.js":128,"./uk":129,"./uk.js":129,"./ur":130,"./ur.js":130,"./uz":132,"./uz-latn":131,"./uz-latn.js":131,"./uz.js":132,"./vi":133,"./vi.js":133,"./x-pseudo":134,"./x-pseudo.js":134,"./yo":135,"./yo.js":135,"./zh-cn":136,"./zh-cn.js":136,"./zh-hk":137,"./zh-hk.js":137,"./zh-tw":138,"./zh-tw.js":138};s.keys=function(){return Object.keys(i)},s.resolve=r,t.exports=s,s.id=203},218:function(t,e,n){function s(t){n(197)}var r=n(7)(n(160),n(222),s,"data-v-353221d0",null);t.exports=r.exports},219:function(t,e,n){function s(t){n(199)}var r=n(7)(n(161),n(224),s,"data-v-6e289678",null);t.exports=r.exports},220:function(t,e,n){function s(t){n(200)}var r=n(7)(n(162),n(225),s,"data-v-74bdb953",null);t.exports=r.exports},221:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"event-listing"},[n("div",{staticClass:"time"},[t._v(t._s(t._f("contextTime")(t.event.utc_timestamp,t.context)))]),t._v(" "),n("div",{staticClass:"labels"},[n("span",{staticClass:"label"},[t._v(t._s(t.event.type))]),t._v(" "),t._l(t.tags,function(e){return[n("span",{staticClass:"label"},[t._v(t._s(e))])]})],2),t._v(" "),n("h4",{staticClass:"title"},[t._t("title",[t._v(t._s(t.title))])],2)])},staticRenderFns:[]}},222:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group"},[t.group?[n("h2",{staticClass:"title"},[n("router-link",{attrs:{to:{path:"/"}}},[t._v("Groups")]),t._v(" /\n      "),n("router-link",{attrs:{to:{path:t.groupPath}}},[t._v(t._s(t.group.title))]),t._v(" "),t.context?[t._v("\n        / "),n("router-link",{attrs:{to:{path:t.contextPath}}},[t._v(t._s(t.context.fields.title))])]:t._e()],2),t._v(" "),n("p",[t._v(t._s(t.group.description))]),t._v(" "),t.context?[n("pm2-context",{attrs:{group:t.group,context:t.context}})]:t.videos&&t.videos.length>0?[t._l(t.videos,function(e){return[n("pm2-event-listing",{attrs:{event:e}},[n("router-link",{attrs:{to:{path:t.group.id+"/context/"+e.id}},slot:"title"},[t._v(t._s(e.fields.title))])],1)]})]:[t._v("\n      No videos …\n    ")]]:t._e()],2)},staticRenderFns:[]}},223:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",[n("h1",{attrs:{id:"main-title"}},[n("router-link",{attrs:{to:{path:"/"}}},[t._v("Piecemaker 3 (not really)")])],1)]),t._v(" "),n("main",[n("router-view")],1)])},staticRenderFns:[]}},224:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group-listing"},[n("div",{staticClass:"inner"},[n("router-link",{attrs:{to:{path:"group/"+t.group.id}}},[n("h3",[t._v(t._s(t.group.title))]),t._v(" "),n("p",[t._v(t._s(t.group.description))])])],1)])},staticRenderFns:[]}},225:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"groups"},[n("h2",[t._v("Groups")]),t._v(" "),n("div",{staticClass:"filters"},[n("label",{attrs:{for:"text-filter"}},[t._v("Search")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.textFilter,expression:"textFilter"}],staticClass:"name-filter",attrs:{type:"text",id:"text-filter"},domProps:{value:t.textFilter},on:{input:function(e){e.target.composing||(t.textFilter=e.target.value)}}}),t._v(" "),n("label",{attrs:{for:"sort-reversed"}},[t._v("Reversed")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sortReversed,expression:"sortReversed"}],staticClass:"reverse-sort",attrs:{type:"checkbox",id:"sort-reversed"},domProps:{checked:Array.isArray(t.sortReversed)?t._i(t.sortReversed,null)>-1:t.sortReversed},on:{__c:function(e){var n=t.sortReversed,s=e.target,r=!!s.checked;if(Array.isArray(n)){var i=t._i(n,null);s.checked?i<0&&(t.sortReversed=n.concat(null)):i>-1&&(t.sortReversed=n.slice(0,i).concat(n.slice(i+1)))}else t.sortReversed=r}}})]),t._v(" "),n("div",{staticClass:"group-list"},[t.groups&&t.groups.length>0?[t._l(t.groupsSortedAndFiltered,function(t){return[n("pm2-group-listing",{attrs:{group:t}})]})]:t._e()],2)])},staticRenderFns:[]}},226:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.group&&t.context?[t.events&&t.events.length>0?[t._l(t.events,function(e){return[n("pm2-event-listing",{attrs:{event:e,context:t.context}})]})]:t._e()]:t._e()],2)},staticRenderFns:[]}},230:function(t,e){}},[156]);
//# sourceMappingURL=app.js.map